@using Kigg
@using Kigg.DomainObjects
@using Kigg.Web
@model Kigg.Web.StoryDetailViewData

@{
    IStory story = Model.Story;
    IUser user = Model.CurrentUser;

}

@Html.ArticleHeader("", new[] { "Strona główna", story.BelongsTo.Name })
<div id="t-@Html.AttributeEncode(story.Id.Shrink())" class="story odd row clearfix">
    @Html.Partial("Story", new StoryItemViewData { Story = story, User = Model.CurrentUser, PromoteText = Model.PromoteText, DemoteText = Model.DemoteText, CountText = Model.CountText, SocialServices = Model.SocialServices, DetailMode = true })
    <div class="clearfix">
    </div>
</div>
@Html.Partial("ImageCode", Model)
<div id="commentTabs" name="tabsy" class="tabs-nav">
    <ul class="tabs-list">
        <li class="ui-tabs-nav-item"><a id="first-tab" class="active" href="#similar">Podobne</a></li>
        <li class="ui-tabs-nav-item"><a id="second-tab" href="#comments">Komentarze</a></li>
        <li class="ui-tabs-nav-item"><a id="third-tab" href="#votes">Wypromowane przez</a></li>
    </ul>
</div>
<div class="tabs-contents">
    <div id="first-tab-content" class="tab-content partialContents" data-url="@Url.Action("Similars", "Story", new { id = Model.Story.Id })">
        Wczytywanie artykułów...
    </div>
    <div id="second-tab-content" class="tab-content">
        <div class="fb-comments" data-href="@Url.RouteUrl("Detail", new { name = Model.Story.UniqueName }, "http")" data-numposts="5" data-colorscheme="light" data-width="600"></div>
    </div>
    <div id="third-tab-content" class="tab-content">
        @Html.Partial("Votes", story.Votes)
    </div>
</div>
@if (Model.CanCurrentUserModerate || (user.HasRightsToEditStory(story)))
{
    @Html.Partial("StoryEditorBox")
}